<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head')%>

  <body>
    <div class="wrapper">
      <%- include('../partials/menu')%>

      <div class="main">
        <%- include('../partials/header')%>
        <main class="content refreshHero">
          <div class="container-fluid p-0">
            <div class="row">
              <div class="col-lg-12">
                <div class="card">
                  <div class="card-header bg-light">New Customer</div>
                  <div class="card-body">
                    <div class="card-body">
                      <form
                        method="post"
                        id="data"
                        encType="multipart/form-data"
                      >
                        <div class="form-group">
                          <label class="form-label">*Customer Name</label
                          ><small
                            id="customerName_er"
                            class="text-danger float-right"
                          ></small>
                          <input
                            type="text"
                            class="form-control"
                            id="customerName"
                            placeholder="Customer name"
                          />
                        </div>
                        <div class="form-group">
                          <label class="form-label">*Phone</label
                          ><small
                            id="phone_er"
                            class="text-danger float-right"
                          ></small>
                          <input
                            type="text"
                            class="form-control"
                            id="phone"
                            placeholder="Customer phone number here"
                          />
                        </div>
                        <div class="row">
                          <div class="col-4">
                            <small class="form-text text-muted"
                              >* Required fields</small
                            >
                          </div>
                          <div class="col-8">
                            <div class="float-right">
                              <button
                                type="submit"
                                class="btn btn-primary addCategory"
                              >
                                Add Customer
                              </button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>

        <%- include('../partials/footer')%>
      </div>
    </div>
    <%- include('../partials/footerLinks')%>
    <script>
      $("form#data").submit(function (e) {
        e.preventDefault();
        var loadingText = 'Add Customer <i class="fa fa-spinner fa-spin"></i>';
        var formData = {};
        formData.customerName = $("#customerName").val();
        formData.phone = $("#phone").val();

        $.ajax({
          url: window.location.pathname,
          type: "POST",
          data: formData,
          success: function (data) {
            if (data.status) {
              toastr.success(data.succMsg);
              document.forms["data"].reset();
            } else {
              $("#customerName_er").text(data.parseErrors.customerName || "");
              $("#phone_er").text(data.parseErrors.phone || "");
            }
          },
        });
      });
    </script>
  </body>
</html>
